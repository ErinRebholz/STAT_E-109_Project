---
title: "STAT_E-109_Project"
author: "Erin Rebholz, Nadia Zafar, Imran Naskani, Max Yanover"
output: html_document
date: "2023-03-22"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Intitial package installation and data loading


```{r, packages}

#Install packages/libraries

library(dplyr)
library(ggplot2)

```


```{r, load}

#Load in csv data for project

data <- read.csv('SDOH_Quality.csv')

str(data)

```
```{r}
#Filter to only acute care and critical access facilities

data <- data %>% filter(hospital_type == 'Acute Care Hospitals' |  hospital_type == 'Critical Access Hospitals') 

(count_cah_acutre <- nrow(data))

```
```{r}

# Drop facilities where zip code census demographic data is not available

data <- data %>% filter(median_age != "#N/A") 

(count_cah_acutre_zipNA <- nrow(data))


```



```{r}

#Switch to numeric variables fo censuse/SDOH measures

data$median_age <- as.integer(data$median_age)
data$per_white_non_hisp <- as.integer(data$per_white_non_hisp)
data$med_inc_15plus_12mo <- as.integer(data$med_inc_15plus_12mo)
data$per_below_poverty <- as.integer(data$per_below_poverty)
data$per_college_grad_deg_25_plus <- as.integer(data$per_college_grad_deg_25_plus)
          
#Switch to numeric variables for quality measures
data$COMP_HIP_KNEE <- as.integer(data$COMP_HIP_KNEE)
data$MORT_30_AMI <- as.integer(data$MORT_30_AMI)
data$MORT_30_CABG <- as.integer(data$MORT_30_CABG)
data$MORT_30_COPD <- as.integer(data$MORT_30_COPD)
data$MORT_30_HF <- as.integer(data$MORT_30_HF)
data$MORT_30_PN <- as.integer(data$MORT_30_PN)
data$MORT_30_STK <- as.integer(data$MORT_30_STK)
data$PSI_03 <- as.integer(data$PSI_03)
data$PSI_04 <- as.integer(data$PSI_04)
data$PSI_06 <- as.integer(data$PSI_06)
data$PSI_08 <- as.integer(data$PSI_08)
data$PSI_09 <- as.integer(data$PSI_09)
data$PSI_10 <- as.integer(data$PSI_10)
data$PSI_12 <- as.integer(data$PSI_12)
data$PSI_11 <- as.integer(data$PSI_11)
data$PSI_13 <- as.integer(data$PSI_13)
data$PSI_11 <- as.integer(data$PSI_11)
data$PSI_14 <- as.integer(data$PSI_14)
data$PSI_15 <- as.integer(data$PSI_15)
data$PSI_90 <- as.integer(data$PSI_90)

#check to make sure all are now integers
str(data)

```

## Initial EDA - Overall Star Rating 

```{r}
#Histogram of Overall Hospital Star Rating

hist(data$hosp_overall_rating)


```


```{r}

#One more small change

hist(data$hosp_overall_rating)


```




